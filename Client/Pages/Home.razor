@page "/"
@using System.Text.Json
@inject IJSRuntime JSRuntime

<PageTitle>Welcome to Climatrol</PageTitle>

<header>
    <nav class="navbar">
        <div class="container">
            <span class="navbar-brand mb-0 h1">Climatrol</span>
            <div class="navbar-nav">
                <a class="nav-link" href="/.auth/login/aad">Log In</a>
                <a class="nav-link" href="/.auth/logout">Log Out</a>
            </div>
        </div>
    </nav>
</header>

<section class="hero">
    <div class="container text-center">
        <h1>Welcome to Climatrol</h1>
        <p>Discover a world of climate control at your fingertips.</p>
        <button class="btn btn-primary" onclick="location.href='/.auth/login/aad'">Log In to Explore</button>
    </div>
</section>

<section class="user-info">
    <div class="container">
        <h3>User Information</h3>
        <pre>@userInfo</pre>
    </div>
</section>

@code {
    private string? userInfo;

    protected override async Task OnInitializedAsync()
    {
        JsonElement userInfoJson = await JSRuntime.InvokeAsync<JsonElement>("getUserInfo");
        userInfo = JsonSerializer.Serialize(userInfoJson, new JsonSerializerOptions { WriteIndented = true });
    }
}